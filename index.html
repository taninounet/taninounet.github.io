<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Subreddits</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="navbar">
        <a href="#" onclick="loadSubreddit('fantasypl')">HOME</a>
        <a href="#" onclick="loadSubreddit('coys')">Spurs</a>
        <a href="#" onclick="loadSubreddit('reddevils')">ManUtd</a>
        <a href="#" onclick="loadSubreddit('mcfc')">ManCity</a>
        <a href="#" onclick="loadSubreddit('liverpoolfc')">Liverpool</a>
        <a href="#" onclick="loadSubreddit('chelseafc')">Chelsea</a>
        <a href="#" onclick="loadSubreddit('crystalpalace')">Palace</a>
        <a href="#" onclick="loadSubreddit('wwfc')">Wolves</a>
    </div>

    <div id="content">
        <h2>Select a subreddit to see the latest posts</h2>
    </div>

    <script>
        async function loadSubreddit(subreddit) {
            const response = await fetch(`https://www.reddit.com/r/${subreddit}/new.json?limit=10`);
            const data = await response.json();
            const posts = data.data.children;

            let contentDiv = document.getElementById('content');
            contentDiv.innerHTML = `<h2>Latest Posts from r/${subreddit}</h2>`;
            
            posts.forEach(post => {
                const postData = post.data;
                const postElement = document.createElement('div');
                postElement.className = 'post';

                const title = postData.title;
                const url = `https://www.reddit.com${postData.permalink}`;
                const thumbnail = postData.thumbnail && postData.thumbnail.startsWith('http') ? postData.thumbnail : 'https://www.redditinc.com/assets/images/site/reddit-logo.png';
                const timeSince = timeAgo(postData.created_utc);
                const comments = postData.num_comments;

                postElement.innerHTML = `
                    <div class="post-thumbnail">
                        <img src="${thumbnail}" alt="Thumbnail">
                    </div>
                    <div class="post-details">
                        <a href="${url}" target="_blank" class="post-title">${title}</a>
                        <div class="post-meta">
                            <span>${timeSince}</span> | 
                            <span>${comments} comments</span>
                        </div>
                    </div>
                `;
                contentDiv.appendChild(postElement);
            });
        }

        function timeAgo(utcSeconds) {
            const seconds = Math.floor(Date.now() / 1000) - utcSeconds;
            let interval = seconds / 31536000;

            if (interval > 1) {
                return Math.floor(interval) + " years ago";
            }
            interval = seconds / 2592000;
            if (interval > 1) {
                return Math.floor(interval) + " months ago";
            }
            interval = seconds / 86400;
            if (interval > 1) {
                return Math.floor(interval) + " days ago";
            }
            interval = seconds / 3600;
            if (interval > 1) {
                return Math.floor(interval) + " hours ago";
            }
            interval = seconds / 60;
            if (interval > 1) {
                return Math.floor(interval) + " minutes ago";
            }
            return Math.floor(seconds) + " seconds ago";
        }
    </script>
</body>
</html>
